exit 
history 
sudo -i 
ssh worker1
sudo worker1
exit
sudo -i 
vim ~/.bashrc
source ~/.bashrc
worker1
worker2
clear
exit
cat .bashrc
sudo -i 
worker1
storage1
ssh-keygen 
for user in root ubuntu 
for user in ubuntu; do
for user in ubuntu; do   for hostname in master worker proxy storage;  do     for instance 1 2 3
for user in ubuntu; do   for hostname in master worker proxy storage;  do   for instance 1 2 3
for hastname in master worker proxy storage; do    for instance 1 2 3 
for hastname in master worker proxy storage; do   for instance in 1 2 3;  do   ssh-copy-id -i /home/ubuntu/.ssh/id_rsa  ubuntu@$hostname$instance;  done; done
ssh-copy-id 

for hastname in master worker proxy storage; do   for instance in 1 2 3;  do   ssh-copy-id -o StrictHostKeyChecking=no  ubuntu@$hostname$instance;  done; done
ssh-keygen 
whomai
whoami
mv /home/ubuntu/.ssh/id_rsa /home/ubuntu/.ssh/id_rsa.old

for hastname in master worker proxy storage; do   for instance in 1 2 3;  do   ssh-copy-id -o StrictHostKeyChecking=no  ubuntu@$hostname$instance;  done; done
ssh-copy-id -o StrictHostKeyChecking=no ubuntu@worker1
worker1
worker2
master1
clear
worker1
sudo -i 
cp /home/ubuntu/.ssh/id_rsa.old /home/ubuntu/.ssh/id_rsa
worker1
rm -rf  /home/ubuntu/.ssh/id_rsa.pub 
rm -rf  /home/ubuntu/.ssh/id_rsa
cp /home/ubuntu/.ssh/id_rsa.old /home/ubuntu/.ssh/id_rsa
worker1
storage3
sudo -i 
sudo -i 
ls
cd /home/ubuntu/
mkdir roles/server_setup
mkdir -p roles/server_setup
cd roles/server_setup/
ansible-galaxy init
ansible-galaxy init server_config
ls
cd ..
ls
cd ..
ls
cd ..
ls
cd ubuntu/roles/server_setup/server_config/
ls
vim tasks/main.yml 
cat /etc/ansible/ansible.cfg 
cd ..
ls
cd ..
ls
cd ..
ls
vim ansible.cfg
ls
cp ansible.cfg roles/server_setup/
ls roles/server_setup/
ls
cd roles/server_setup/
ansible --version
clear
ansible --version
vim ansible.cfg 
ls
cp /etc/ansible/hosts /home/ubuntu/roles/server_setup/myhosts
vim ansible.cfg 
vim myhosts 
ansible -host all -m ping
ansible host all -m ping
ansible  all -m ping
ansible  all -m ping -v
ansible  all -m ping -vv
ssh worker1
sudo -i 
ssh worker1
vim /etc/hosts

sudo -i 
ssh worker1
ansible  all -m ping 
ls
ca /etc/os-release 
cat  /etc/os-release 
cat /etc/resolv.conf \
cat /etc/resolv.conf 
cat /etc/netplan/50-cloud-init.yaml 
sudo apt install dig
sudo apt install bind-utils
sudo apt install bind9-utils

dig @10.10.0.2 docker.io
ls
vim server_config/tasks/
ls
vim server_config/tasks/main.yml 
vim server_config/tasks/config_host.yml
cp /etc/hosts server_config/templates/hosts.template
ls
vim server_config/tasks/config_host.yml 
vim server_config/templates/hosts.template
vim server_config/tasks/config_host.yml 
vim server_config/tasks/main.yml 
vim server_config/tasks/config_host.yml 
ls
vim server_config/templates/hosts.j2
vim server_config/tasks/config_host.yml 
vcd ..
ls
vim server_config/tasks/
vim server_config/tasks/main.yml
vim server_config/tasks/docker_init.yml
vim server_config/tasks/main.yml
vim server_config/tasks/ntp_init.yml
vim server_config/tasks/config_host.yml 
cd ..
ls
cd ..
ls
vim server.yaml
tree
apt install tree
sudo apt install tree
tree
ls
cd roles/
ls
cd server_setup/
ls
cp ansible.cfg server_config/
cp myhosts  server_config/
cd server_config/
ls
ansible --version
cd ../..
ls
mv server_setup/* .
ls
tree server_setup/
rm -rf server_setup/
ls
cd ..
ls
clear
ls -ltrh
tree
ls
rm -rf ansible.cfg 
ls
ansible --version
ls
cp roles/ansible.cfg  .
cp roles/myhosts  .
ls
ansible --version
pwd
ls
cd roles/server_config/
ls
rm ansible.cfg 
rm myhosts 
ls
ansible --version
cd ..
ls
cp ansible.cfg server_config/
cp myhosts server_config/
ls
cd ..
ls
vim server.yaml 
tree
vim server.yaml 
ansible-playbook server.yaml 
ls
vim roles/server_config/tasks/main.yml 
ansible-playbook server.yaml 
vim /home/ubuntu/roles/server_config/tasks/config_host.yml
ansible-playbook server.yaml 
worker1
vim server.yaml 
ansible-playbook server.yaml 
worker1
ls
vim roles/server_config/tasks/config_host.yml 
worker1
vim roles/server_config/templates/hosts.j2 
ansible-playbook server.yaml 
vim roles/server_config/templates/hosts.j2 
ansible-playbook server.yaml 
worker1
vim roles/server_config/templates/hosts.j2 
ansible-playbook server.yaml 
cat /etc/hosts
pwd
ls
vim roles/server_config/tasks/config_dns.yml
cat /etc/netplan/50-cloud-init.yaml 
worker1
vim roles/server_config/tasks/config_dns.yml
vim roles/server_config/handlers/ma
vim roles/server_config/tasks/config_dns.yml 
vim roles/server_config/tasks/main.yml 
ls
ansible-playbook server.yaml 
vim roles/server_config/tasks/config_dns.yml 
ansible-playbook server.yaml 
vim roles/server_config/tasks/config_dns.yml 
vim roles/server_config/handlers/main.yml 
ansible-playbook server.yaml 
vim roles/server_config/tasks/config_host.yml 
vim roles/server_config/tasks/config_dns.yml 
vim roles/server_config/tasks/config_host.yml 
ansible-playbook server.yaml 
vim server.yaml 
vim roles/server_config/tasks/config_dns.yml 
ansible-playbook server.yaml 
worker1 
exit
cd /home/ubuntu/
ls
vim roles/server_config/tasks/config_dns.yml 
ansible-playbook server.yaml 
vim roles/server_config/tasks/docker_init.yml 
vim roles/server_config/tasks/config_dns.yml 

vim roles/server_config/tasks/main.yml 
ansible-playbook server.yaml 
vim roles/server_config/tasks/main.yml 
vim /home/ubuntu/roles/server_config/handlers/main.yml
ansible-playbook server.yaml 
vim /home/ubuntu/roles/server_config/handlers/main.yml
ansible-playbook server.yaml 
vim /home/ubuntu/roles/server_config/tasks/config_dns.yml 
vim /home/ubuntu/roles/server_config/handlers/main.yml 

ansible-playbook server.yaml 
vim /home/ubuntu/roles/server_config/tasks/config_dns.yml 
vim /home/ubuntu/roles/server_config/handlers/main.yml 
ansible-playbook server.yaml 
vim /home/ubuntu/roles/server_config/tasks/config_dns.yml 
ansible-playbook server.yaml 
worker1
rm /home/ubuntu/roles/server_config/templates/hosts.template 

rm /home/ubuntu/roles/server_config/tasks/docker_init.yml 
vim /home/ubuntu/roles/server_config/tasks/docker_init.yml 
ansible-playbook server.yaml 
vim /home/ubuntu/roles/server_config/handlers/main.yml 
vim /home/ubuntu/roles/server_config/tasks/docker_init.yml 
vim /home/ubuntu/roles/server_config/handlers/main.yml 
ansible-playbook server.yaml 
ls
git init
ls -ltrh
git add .
git commit -m "server_config ansible role"
git config --global user.email "salehstudent@gmail.com"
git commit -m "server_config ansible role"
git remote add origin https://github.com/salehhoushangi/devops.git
git branch -M main
git push -u origin main
git branch -M main
git push -u origin main
gpg --gen-key
ls
ls -ltrh
gpg --list-secret-keys --keyid-format=long
gpg --armor --export BA7AD188AEA3A6C6
git push -u origin main
ssh -T git@github.com
ls -ltrh
git push -u origin main
git@github.com:salehhoushangi/devops.git
git push -u origin main
git remote add origin git@github.com:salehhoushangi/devops.git
git push -u origin main
git remote add origin https://github.com/salehhoushangi/devops.git
git branch -M main
git push -u origin main
git branch -a
git remote rm origin
git branch -a
git remote show origin
git remote remove origin
git remote add origin git@github.com:salehhoushangi/devops.git
git push -u origin main
ls
git add .
git commit -m "server_config ansible role"
git push -u origin main
git push 
git push origin main
history 
git push -u origin master
git branch -a
git push
exit
vim /home/ubuntu/roles/server_config/tasks/ntp_init.yml 
clear
ssh-keygen-f ~/.ssh/id_rsa -y > ~/.ssh/id_rsa.pub
ssh-keygen -f ~/.ssh/id_rsa -y > ~/.ssh/id_rsa.pub
cat /home/ubuntu/.ssh/id_rsa.pub 
ls
sudo -i 
history  | grep git
date
timdatectl
timedatectl
ls
cd ..
ls
cd ubuntu/
ls
mkdir docker_image
cd docker_image/

mv dockerfile.yaml Dockerfile.yml
vim Dockerfile.yml 
sudo su
ls
cp docker_image/Dockerfile.yml  roles/server_config/templates/hosts.j2 
vim roles/server_config/tasks/config_dns.yml 
vim roles/server_config/tasks/config_host.yml 
ansible-galaxy search ntp
clear
cd roles/server_config/
ls
cp ../../docker_image/Dockerfile.yml templates/
vim templates/Dockerfile.yml 
ls
mkdir Build_img
ls
fv 
cd Build_img/
ls
mv ../templates/Dockerfile.yml .
ls
vim Dockerfile.yml 
pwd
cd ..
ls
cd templates/
ls
vim chrony_server.conf
vim chrony_client.conf
cd ..
cd tasks/
ls
vim ntp_docker.yml
cd ..
ls
vim tasks/ntp_docker.yml 
ls
vim Build_img/Dockerfile.yml 
cd templates/
pwd
vim ../Build_img/Dockerfile.yml 
ls /home/ubuntu/roles/server_config/templates/chrony_server.conf 
ls -ltrh  /home/ubuntu/roles/server_config/templates/chrony_server.conf 
cd ..
vim tasks/ntp_docker.yml 
cp templates/chrony_server.conf Build_img/
cd Build_img/
ls
vim Dockerfile.yml 
pwd
vi Dockerfile.yml 
ls
mv Dockerfile.yml Dockerfile
ls
docker build -t ntp-test-server .
sudo docker build -t ntp-test-server .
docker login
sudo -i 
clear
ls
cd ..
ls
cd ..
ls
cd cd server_config/
ls
cat  server_config/tasks/config_host.yml 
ls
cat server_config/templates/hosts.j2 
vim server_config/templates/hosts.j2 
ls server_config/templates/hosts.j2 
vim server_config/templates/hosts.j2 
ls
cd ..
ls
ansible-playbook server.yaml 
proxy 
proxy3
storage3
ls
cd ..
ls
cd ubuntu/
ls
cd roles/server_config/
ls
clear
tree
ls
cd roles/
git push
git commit -m "install dockerce-cli and ..."
git add .
git commit -m "install dockerce-cli and ..."
git push
cleer
clear
sudo -i 
cd /home/ubuntu/roles/server_config/
ls
git add .
git commit "12-dec-2021"
history | grep git
git commit -m  "12-dec-2021"
ls
cd ..
ls
git add .
git commit -m  "12-dec-2021"
git push 
sudo curl -L "https://github.com/docker/compose/releases/download/1.27.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
ls
cd ..
ls
cd ..
ls
cd ubuntu/
ls
mkdir docker-compose
cd docker-compose/
ls
sudo curl -L "https://github.com/docker/compose/releases/download/1.27.4/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
docker ps -a
sudo docker ps -a
docker stop ntp-server:v0.1
sudo docker stop ntp-server:v0.1
sudo docker stop b5ebd7e53fe1
sudo docker ps -a
docker images ls
sudi docker images ls
sudo -i 
cd /home/ubuntu/roles/server_config/
ls
cd tasks/
ls
vim docker_compose.yml
cd ..
cd defaults/
ls
vim main.yml 
cd ..
vim tasks/docker_compose.yml 
vim defaults/main.yml 
vim tasks/docker_init.yml 
vim vars/main.yml 
vim tasks/docker_compose.yml 
vim tasks/docker_init.yml 
vim tasks/docker_compose.yml 
vim tasks/main.yml 
cd ..
ls
cd ..
ls
ansible-playbook server.yaml 
docker-compose --version
git add .
git commit -m "add docker-compose  installation task"
git push
cd roles/server_config/Build_img/
ls
vim Dockerfile
vim docker-compose.yml
sudo chown docker-compose.yml
sudi -i 
sudo -i 
ls -ltrh
vim docker-compose.yml 
sudo ls /etc/localtime 
cat /etc/localtime 
date
ls
docker-compose build
vim docker-compose 
vim docker-compose.yml 
docker-compose build
sudo docker-compose build
docker images
sudo docker images
sudo -i 
vi docker-compose.yml 
sudo -i 
sudo docker-compose build
docker-compose up
sudo docker-compose up
date
sudo docker ps
sudo docker ps -A
sudo docker ps -a
sudo -i 
sudo docker-compose build
sudo -i 
vim docker-compose.yml 
sudo -i 
vim Dockerfile
sudo docker-compose build
docker images
sudo docker images
sudo docker system prune
sudo docker rmi  aee5d7a79ec7
docker rm -f ntp-test
sudo docker rm -f ntp-test
sudo docker rm -f 1e3a536baf59
sudo docker rmi  aee5d7a79ec7
sudo docker iamges
sudo docker images
sudo docker rmi build_img_ntp-server
sudo docker-compose build
sudo docker images
docker run -itd --name ntp-test build_img_ntp-server /bin/sh 
sudodocker run -itd --name ntp-test build_img_ntp-server /bin/sh 
sudo docker run -itd --name ntp-test build_img_ntp-server /bin/sh 
sudo docker ps
sudo docker ps -a
date
cat /etc/timezone 
date
sudo -i 
vim /home/ubuntu/roles/server_config/Build_img/Dockerfile
cd 
cd /home/ubuntu/roles/
ls
git clone https://github.com/geerlingguy/ansible-role-ntp.git
ls
cd ansible-role-ntp/vars/
ls
vim Debian.yml 
cd ..
ls
vim tasks/main.yml 
vim defaults/main.yml 
ls
cd ..
ls
cd ..
ls
vim server.yaml 
ansible-playbook server.yaml 
systemctl status chrony
systemctl status chronyd
ntpdate
ls
vim roles/ansible-role-ntp/defaults/main.yml 
ntpdate
worker1
exit
sudo -i 
tmux -s proxy1
tmux new -s proxy1
tmux attach-session -t 0
sudo su
storage1
cd /home/ubuntu/
ls
cd roles/
ansible --version
cd ceph-ansible/
ansible --version
ansible-playbook -vv -i <your-inventory> site-container.yml
ansible-playbook -vv -i cephhost  site-container.yml
ansible-playbook -i cephhost  site-container.yml
grep -rn "check for python" .
vim ./raw_install_python.yml 
sudo apt install platform-python
ls -ltrh
ansible --version
sudo ln -s /usr/bin/python3 /usr/bin/pyhton
ls -ltrh /usr/bin/
ansible-playbook -i cephhost  site-container.yml
ansible-playbook -i --v cephhost  site-container.yml
ansible-playbook -i --vv cephhost  site-container.yml
ansible-playbook  -vv-i -cephhost  site-container.yml
ansible-playbook  -vv- i -cephhost  site-container.yml
ansible-playbook  -vv -i cephhost  site-container.yml
storage1
cat /etc/hosts
cd ..
cd server_config/
ls
cd ..
ls
cd ..
ls
vim server.yaml 
ansible-playbook server.yaml 
ls
vim roles/server_config/myhosts 
ssh ubuntu@10.10.0.141
sudo vim /etc/hosts
ansible-playbook server.yaml 
ls
cd roles/
ls
cd ceph-ansible/
ls
ansible-playbook -vv -i cephhost site-container.yml
ansible-playbook -i cephhost site-container.yml
ls /usr/libexec/platform-python
sudo ls /usr/libexec/platform-python
sudo ls /usr/libexec/
storage1
ansible-playbook -i cephhost site-container.yml
cd roles/ceph-ansible/
ls
ansible-playbook -i cephhost site-container.yml
ceph-container-engine : install container packages] **************************
Friday 17 December 2021  02:29:04 +0330 (0:00:00.113)       0:00:46.744 *******
FAILED - RETRYING: install container packages (3 retries left).
FAILED - RETRYING: install container packages (2 retries left).
FAILED - RETRYING: install container packages (1 retries left).
fatal: [storage2]: FAILED! => changed=false
fatal: [storage1]: FAILED! => changed=false
fatal: [storage3]: FAILED! => changed=false
NO MORE HOSTS LEFT *****************************************************************
PLAY RECAP *************************************************************************
storage1                   : ok=49   changed=4    unreachable=0    failed=1    skipped=167  rescued=0    ignored=0
grep -rn "ceph-container-engine" .
vim ./infrastructure-playbooks/cephadm.yml
ansible-playbook -i cephhost site-container.yml
tmux 
tmux
tmux attach-session -t 0
vim /home/ubuntu/roles/ceph-ansible/ls
cd  /home/ubuntu/roles/ceph-ansible/
ansible-playbook site.yml 
Hi mester Houshangi
Are you here?
ansible-playbook site.yml 
hi
salam
tmux attach-session -t 0
cd roles/ceph-ansible/
ls
ansible-playbook site.yml 
cd roles/ceph-ansible/
ls
ansible-playbook site.yml 
vim /home/ubuntu/roles/ceph-ansible/roles/ceph-common/tasks/installs/debian_community_repository.yml
cd /home/ubuntu/roles/
ls
cd ceph-ansible/
ls
ansible-playbook site.yml 
grep -nri Failed to update apt cache
grep -nri "Failed to update apt cache" .
grep -nr "Failed to update apt cache" .
egrep -nr Failed to update apt cache .
egrep -nri "Failed to update apt cache" .
egrep -nr "Failed to update apt cache" .
egrep -nr Failed to update apt cache .
history 
grep -rn "Failed to update apt cache" .

vim /roles/ceph-common/tasks/installs/debian_community_repository.yml
vim roles/ceph-common/tasks/installs/debian_community_repository.yml
ansible-playbook site.yml 
tmux
ansible-playbook site.yml 
cd /home/ubuntu/roles/ceph-ansible/

ansible-playbook site
ansible-playbook site.yml 
apt update
sudo su
ansible-playbook site.yml 
vim /home/ubuntu/roles/ceph-ansible/roles/ceph-common/tasks/installs/debian_community_repository.yml
ansible-playbook site.yml 
sudo do-release-upgrade
sudo do-release-upgrade -d
sudo apt dist-upgrade
sudo do-release-upgrade
sudo do-release-upgrade -d
tmux attach-session -t 0
history
tmux attach-session -t 0
vim /home/ubuntu/roles/ceph-ansible/roles/ceph-common/tasks/installs/debian_community_repository.yml
tmux
cd roles/ceph-ansible/
ls
ansible-playbook site.yml 
ansible --version
sudo ansible --version
sudo su #ansible --version
sudo apt install ansible
ansible-playbook site.yml 
cat /etc/hosts
worker1

ssh ubuntu@10.10.0.138
sudo vim /etc/hosts

vim /home/ubuntu/roles/ceph-ansible/roles/ceph-common/tasks/installs/debian_community_repository.yml
ansible-playbook site.yml 
vim /home/ubuntu/roles/ceph-ansible/roles/ceph-common/tasks/installs/debian_community_repository.yml
ansible-playbook site.yml 
exit
tmux 
tmux attach-session -t 0
history 
history  | grep gpg
sudo -i 
history | grep wget
history | grep "wget"
ls /var/lib/apt/lists
proxy 2
proxy2
cat /etc/pam.d/common-auth 
